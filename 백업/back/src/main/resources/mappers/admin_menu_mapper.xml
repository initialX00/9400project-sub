<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.korit.mcdonaldkiosk.mapper.AdminMenuMapper">

    <resultMap id="menuResultMap" type="com.korit.mcdonaldkiosk.entity.Menu">
        <id property="menuId" column="menu_id" />
        <result property="menuName" column="menu_name" />
        <result property="menuCategory" column="menu_category" />
        <result property="menuSequence" column="menu_sequence" />
        <result property="singleImg" column="single_img" />
        <result property="setImg" column="set_img" />

        <association property="menuPrice" resultMap="menuPriceResultMap"/>
    </resultMap>

    <resultMap id="menuPriceResultMap" type="com.korit.mcdonaldkiosk.entity.MenuPrice">
        <id property="menuPriceId" column="menu_price_id" />
        <result property="menuId" column="mt_menu_id" />
        <result property="menuPrice" column="menu_price" />
        <result property="menuSetPrice" column="menu_set_price" />
        <result property="menuSetLunchPrice" column="menu_set_lunch_price" />
        <result property="menuLargePrice" column="menu_large_price" />
    </resultMap>

    <select id="selectAllCategories" resultMap="menuResultMap">
        SELECT
            menu_category
        FROM
            menu_tb mt
        group by
            menu_category
    </select>

    <select id="selectAllAdminMenus" resultMap="menuResultMap">
        SELECT
            mt.menu_id,
            mt.menu_name,
            mt.menu_category,
            mpt.menu_price
        FROM
            menu_tb mt
            LEFT OUTER JOIN menu_price_tb mpt ON mt.menu_id = mpt.menu_id
    </select>

    <select id="selectAdminMenusByCategory" resultMap="menuResultMap">
        SELECT
            mt.menu_id,
            mt.menu_name,
            mt.menu_category,
            mpt.menu_price
        FROM
            menu_tb mt
            LEFT OUTER JOIN menu_price_tb mpt ON mt.menu_id = mpt.menu_id
        where
            mt.menu_category = #{menuCategory}
    </select>





</mapper>